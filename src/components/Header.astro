---
// src/components/Header.astro
import logoLycos from '../assets/logoLycos.svg?url';
---

<header class="h-[100px] w-full bg-white px-4 md:px-8 flex items-center justify-between top-0 left-0 right-0 z-40 shadow-sm fixed">
  <!-- Logo -->
  <a href="/">
    <img class="w-[70px] h-[70px" src={logoLycos} alt="Logo" />
  </a>

  <!-- Menú Desktop (oculto en móvil) -->
   <div class="flex gap-4 ">
  <nav class="hidden md:flex items-center gap-8">
    <a href="#inicio" class="nav-link text-gray-700 hover:text-orange-500 text-base font-semibold font-inter leading-6 transition-colors" data-section="inicio">Inicio</a>
    <a href="#funcionalidades" class="nav-link text-gray-700 hover:text-orange-500 text-base font-semibold font-inter leading-6 transition-colors" data-section="funcionalidades">Servicios</a>
    <a href="#nosotros" class="nav-link text-gray-700 hover:text-orange-500 text-base font-semibold font-inter leading-6 transition-colors" data-section="nosotros">Nosotros</a>
    <a href="#app" class="nav-link text-gray-700 hover:text-orange-500 text-base font-semibold font-inter leading-6 transition-colors" data-section="app">Aplicación</a>
    <a href="#testimonios" class="nav-link text-gray-700 hover:text-orange-500 text-base font-semibold font-inter leading-6 transition-colors" data-section="testimonios">Testimonios</a>
    <a href="#contacto" class="nav-link text-gray-700 hover:text-orange-500 text-base font-semibold font-inter leading-6 transition-colors" data-section="contacto">Contacto</a>
  </nav>
  <a href="https://play.google.com/store/apps/details?id=com.lycosdev.lycos" target="_blank"> <button class=" bg-orange-500 hover:bg-orange-600 text-white px-4 py-1.5 rounded-md text-base font-semibold font-inter leading-6 transition-colors">
      Descargar App
    </button></a>


   </div>

<!-- Menú Hamburguesa (solo móvil) -->
<button id="hamburger" class="md:hidden focus:outline-none" aria-label="Abrir menú">
  <div class="h-11 w-11 min-h-11 min-w-11 px-3.5 py-2 rounded-md inline-flex justify-center items-center hover:bg-orange-50 transition-colors">
    <div class="w-4 h-4 relative">
      <!-- Línea superior -->
      <div class="w-5 h-0.5 bg-orange-500 absolute top-1 left-0 transform transition-transform duration-300 hamburger-line-top"></div>
      <!-- Línea media -->
      <div class="w-5 h-0.5 bg-orange-500 absolute top-2 left-0 transition-opacity duration-300 hamburger-line-middle"></div>
      <!-- Línea inferior -->
      <div class="w-5 h-0.5 bg-orange-500 absolute top-3 left-0 transform transition-transform duration-300 hamburger-line-bottom"></div>
    </div>
  </div>
</button>

  <!-- Menú Móvil (overlay) -->
  <div id="mobileMenu" class="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center gap-8 translate-x-full transition-transform duration-300">
    <a href="#" class="text-orange-500 text-xl font-semibold hover:text-orange-600">Inicio</a>
    <a href="#" class="text-gray-700 text-xl font-semibold hover:text-orange-500">Servicios</a>
    <a href="#" class="text-gray-700 text-xl font-semibold hover:text-orange-500">Nosotros</a>
    <a href="#" class="text-gray-700 text-xl font-semibold hover:text-orange-500">Aplicación</a>
    <a href="#" class="text-gray-700 text-xl font-semibold hover:text-orange-500">Testimonios</a>
    <a href="#" class="text-gray-700 text-xl font-semibold hover:text-orange-500">Contacto</a>
  <a href="https://play.google.com/store/apps/details?id=com.lycosdev.lycos" target="_blank"> <button class=" bg-orange-500 hover:bg-orange-600 text-white px-4 py-1.5 rounded-md text-base font-semibold font-inter leading-6 transition-colors">
      Descargar App
    </button></a>

    <button id="closeMenu" class="absolute top-6 right-6 text-3xl focus:outline-none" aria-label="Cerrar menú">✕</button>
  </div>
</header>

<script is:inline>
document.addEventListener('DOMContentLoaded', () => {
  // Configuración del Intersection Observer
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.6 // 60% de visibilidad para considerar activa
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const id = entry.target.id;
      const navLink = document.querySelector(`.nav-link[data-section="${id}"]`);
      
      if (entry.isIntersecting) {
        // Remover activo de todos los links
        document.querySelectorAll('.nav-link').forEach(link => {
          link.classList.remove('text-orange-500');
          link.classList.add('text-gray-700');
        });
        
        // Activar el link correspondiente
        if (navLink) {
          navLink.classList.remove('text-gray-700');
          navLink.classList.add('text-orange-500');
        }
      }
    });
  }, observerOptions);

  // Observar todas las secciones
  document.querySelectorAll('section[id], div[id], main > *[id]').forEach(section => {
    observer.observe(section);
  });

  // Tu código existente del menú móvil...
  const hamburger = document.getElementById('hamburger');
  const mobileMenu = document.getElementById('mobileMenu');
  const closeMenu = document.getElementById('closeMenu');
  const mobileLinks = document.querySelectorAll('#mobileMenu a');

  const toggleMenu = (open) => {
    if (open) {
      mobileMenu.classList.remove('translate-x-full');
      document.body.style.overflow = 'hidden';
    } else {
      mobileMenu.classList.add('translate-x-full');
      document.body.style.overflow = '';
    }
  };

  if (hamburger && mobileMenu && closeMenu) {
    hamburger.addEventListener('click', () => toggleMenu(true));
    closeMenu.addEventListener('click', () => toggleMenu(false));
    
    mobileLinks.forEach(link => {
      link.addEventListener('click', () => toggleMenu(false));
    });
  }
});
</script>

<style>
  /* Asegurar que el body no haga scroll cuando el menú está abierto */
  body.menu-open {
    overflow: hidden;
  }
</style>